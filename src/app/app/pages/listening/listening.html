<div class="p-4">
  <button (click)="alternarFiltros()" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700">
    {{ mostrarFiltros ? 'Ocultar filtros' : 'Mostrar filtros' }}
  </button>
</div>

<div *ngIf="mostrarFiltros" class="p-4">
  <div class="p-4 grid gap-4 md:grid-cols-2 lg:grid-cols-4">

    <!-- Selección de hoja -->
<div class="p-4">
  <label class="block mb-2 font-semibold">Selecciona hoja del Excel</label>
  <select [(ngModel)]="hojaSeleccionada" (change)="onSelectHojaChange()" class="border p-2 rounded w-full">
    <option *ngFor="let hoja of hojasDisponibles" [value]="hoja">{{ hoja }}</option>
  </select>
</div>

    <!-- Grupo -->
    <div>
      <label class="block mb-1 font-semibold">Grupo</label>
      <select [(ngModel)]="grupoSeleccionado" (change)="filtrar()" class="border p-2 rounded w-full">
        <option value="">Todos</option>
        <option *ngFor="let grupo of grupos" [value]="grupo">{{ grupo }}</option>
      </select>
    </div>

    <!-- Categoría -->
    <div>
      <label class="block mb-1 font-semibold">Categoría</label>
      <select [(ngModel)]="categoriaSeleccionada" (change)="filtrar()" class="border p-2 rounded w-full">
        <option value="">Todas</option>
        <option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria }}</option>
      </select>
    </div>

    <!-- Nivel -->
    <div>
      <label class="block mb-1 font-semibold">Nivel</label>
      <select [(ngModel)]="nivelSeleccionado" (change)="filtrar()" class="border p-2 rounded w-full">
        <option value="">Todos</option>
        <option *ngFor="let nivel of niveles" [value]="nivel">{{ nivel }}</option>
      </select>
    </div>

    <!-- Repasar Lucía -->
    <div>
      <label class="block mb-1 font-semibold">¿Repasar Lucía?</label>
      <select [(ngModel)]="repasarLuciaSeleccionado" (change)="filtrar()" class="border p-2 rounded w-full">
        <option value="">Todos</option>
        <option *ngFor="let op of repasarLuciaOptions" [value]="op">{{ op }}</option>
      </select>
    </div>
  </div>

</div>

<!-- Seleccionar voz -->
<div *ngIf="mostrarFiltros" class="p-4">
  <div class="p-4">
    <label class="block font-semibold mb-2">Selecciona las voces para audio en inglés:</label>

    <label class="inline-flex items-center mr-4">
      <input type="checkbox" [checked]="vocesSeleccionadas.includes('hope')"
        (change)="onCheckboxChange($event, 'hope')" />

      <span class="ml-2">Hope</span>
    </label>

    <label class="inline-flex items-center">
      <input type="checkbox" [checked]="vocesSeleccionadas.includes('thomas')"
        (change)="onCheckboxChange($event, 'thomas')" />

      <span class="ml-2">Thomas</span>
    </label>
  </div>
</div>

<!-- Resultados -->
<div class="p-4 grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
  <div *ngFor="let item of resultadosFiltrados" class="border rounded p-4 shadow">
    <h3 class="text-lg font-bold">{{ item.espanol }} - {{ item.ingles }}</h3>
    <img [src]="item.img" alt="Imagen" class="my-2 max-h-32 object-contain" />
    <audio controls [src]="item['audio-espanol']"></audio>
    <div *ngFor="let voz of vocesSeleccionadas">
      <label class="block text-sm text-gray-500 mt-2 capitalize">Voz: {{ voz }}</label>
      <audio controls [src]="item['audio-ingles-' + voz]"></audio>
    </div>

    <p class="text-sm text-gray-600 mt-2">
      Grupo: {{ item.grupo }} | Nivel: {{ item.nivel }} | Categoría: {{ item.categoria }}
    </p>
  </div>
</div>
